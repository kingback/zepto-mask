/*! Generated by Grunt: http://gitbub.com/kingback/zepto-mask/ 2014-07-21 02:24:39 */
!function(){function a(){var a=document.createElement("style"),b=document.getElementsByTagName("head")[0];a.type="text/css",a.id="m-mask-style",b.insertBefore(a,b.firstChild),a.appendChild(document.createTextNode(".m-mask {background:#000;}")),c&&a.appendChild(document.createTextNode(".m-mask-disable-scroll {position:relative;overflow:hidden;height:100%;}"))}function b(){this.init.apply(this,arguments)}var c=!!navigator.userAgent.match(/huawei(\w?|\s?|-?)p6/gi),d=$(document.documentElement),e=$(document.body);b.TEMPLATES={mask:'<div class="m-mask m-mask-hidden"></div>',content:'<div class="m-mask-content"></div>'},b.ATTRS={easing:"linear",duration:200,zIndex:100,opacity:.7,useAnim:!1,visible:!1,scroll:!1,clickHide:!1,render:!1,parent:"body",content:null,defClass:null,position:"fixed"},$.extend(b.prototype,{init:function(a){var c;this.rendered=!1,this.destroyed=!1,this._config=$.extend({},b.ATTRS,a),(c=this.config("render"))&&this.render(c)},destroy:function(){return this.rendered&&!this.destroyed&&(this.mask.off(),this.mask.remove(),delete this.mask,delete this.content,delete this.parent),delete this._config,this.destroyed=!0,this},config:function(a,b){if("string"==typeof a){if("undefined"==typeof b)return this._config[a];this._config[a]=b}else a&&(this._config=$.extend(this._config,a));return this._config},render:function(a){return this.rendered?this:(this.renderUI(a),this.bindUI(),this.syncUI(),this.rendered=!0,this)},renderUI:function(a){var c=this.config(),a=$(a&&a!==!0?a:c.parent),d=$(b.TEMPLATES.mask),e=c.content?$(b.TEMPLATES.content):null;return d.css({width:"100%",height:"100%",left:"0",top:"0",opacity:"0",display:"none",position:c.position,"z-index":Number(c.zIndex)}),c.defClass&&d.addClass(c.defClass),e&&(e.append(c.content),d.append(e)),a.append(d),this.mask=d,this.parent=a,this.content=e,this},bindUI:function(){this.config("clickHide")&&this.mask.on("click",$.proxy(function(){this.hide()},this))},syncUI:function(){this.config("visible")&&this._show(!1)},show:function(a){return this.setVisible(!0,a)},hide:function(a){return this.setVisible(!1,a)},toggle:function(a){return this.setVisible(!this.config("visible"),a)},setVisible:function(a,b){var c=this.config(),d=c.visible,e=!!a;return d!==e&&(c.visible=e,this[e?"_show":"_hide"](b)),this},disableScroll:function(){return d.off("touchmove",this._preventScroll),d.on("touchmove",this._preventScroll),c&&(d.addClass("m-mask-disable-scroll"),e.addClass("m-mask-disable-scroll")),this},enableScroll:function(){return d.off("touchmove",this._preventScroll),c&&(d.removeClass("m-mask-disable-scroll"),e.removeClass("m-mask-disable-scroll")),this},_show:function(a){this.mask||this.render(),this._handleVisibleChange(a)},_hide:function(a){this.mask&&this._handleVisibleChange(a)},_handleVisibleChange:function(a){function b(){!e&&c.mask.hide(),!scroll&&c[e?"disableScroll":"enableScroll"](),c.mask.trigger("afterVisibleChange",{visible:e,useAnim:a})}var c=this,d=this.config(),e=d.visible,a="undefined"==typeof a?d.useAnim:!!a,f={opacity:e?d.opacity:0};c.mask.trigger("visibleChange",{visible:e,useAnim:a}),e&&c.mask.show(),c.mask.toggleClass("m-mask-hidden",!e),a&&this.mask.animate?this.mask.animate(f,d.duration,d.easing,b):(this.mask.css(f),b())},_preventScroll:function(a){a.preventDefault()}}),a(),window.ZeptoMask=b}();